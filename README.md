# BookingTelegramBot üèÇ

$\textsf{\Huge{{\color[rgb]{1.0, 0.7, 0.8}b}{\color[rgb]{1.0, 0.6, 0.7}o}{\color[rgb]{1.0, 0.5, 0.6}a}{\color[rgb]{1.0, 0.4, 0.5}r}{\color[rgb]{1.0, 0.3, 0.4}d~ }{\color[rgb]{1.0, 0.2, 0.3}e}{\color[rgb]{1.0, 0.1, 0.2}d}{\color[rgb]{1.0, 0.0, 0.1}i}{\color[rgb]{0.9, 0.0, 0.2}t}{\color[rgb]{0.8, 0.0, 0.3}i}{\color[rgb]{0.7, 0.0, 0.4}o}{\color[rgb]{0.6, 0.0, 0.5}n}}}$ 

---

–ë–æ—Ç –¥–ª—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–Ω–æ—É–±–æ—Ä–¥–æ–≤ —á–µ—Ä–µ–∑ —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞ + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥—É–≥–ª –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º

---

## –ü–æ–ª—É—á–µ–Ω–∏–µ credentials.json
–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—É–≥–ª –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å credentials.json
–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é credentials.json:
https://developers.google.com/calendar/api/guides/concepts/auth

**–í–æ—Ç –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `credentials.json`:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Google Cloud Console
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –Ω–∞–π–¥–∏—Ç–µ "APIs & Services" ‚Üí "Enabled APIs & services"
4. –ù–∞–∂–º–∏—Ç–µ "+ ENABLE APIS AND SERVICES"
5. –ù–∞–π–¥–∏—Ç–µ "Google Calendar API" –∏ –≤–∫–ª—é—á–∏—Ç–µ –µ–≥–æ
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "Credentials" (–≤ –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é)
7. –ù–∞–∂–º–∏—Ç–µ "CREATE CREDENTIALS" ‚Üí "OAuth client ID"
8. –í—ã–±–µ—Ä–∏—Ç–µ "Desktop app"
9. –ù–∞–∂–º–∏—Ç–µ "CREATE"
10. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ credentials.json –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞



## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ üõ†

**–æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.public_env` –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –µ–≥–æ –≤ `.env`!**

–ü—Ä–æ–π–¥–µ–º—Å—è –ø–æ —Ñ–∞–π–ª—É `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏–º –≤—Å–µ –ø–æ–ª—è:

### TELEGRAM_BOT_TOKEN
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ç–æ–∫–µ–Ω —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞

### LOGS_CHANNEL_ID
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –∫–∞–Ω–∞–ª–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
–ë–æ—Ç–∞ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–∞–Ω–∞–ª –∏ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å ID –∫–∞–Ω–∞–ª–∞, –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–ª–∞—Ç—å –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ @LeadConverterToolkitBot
**–í–ê–ñ–ù–û:** ID –∫–∞–Ω–∞–ª–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º, –Ω–∞–ø—Ä–∏–º–µ—Ä `-1002328687465`


### FIRST_CALENDAR_ID SECOND_CALENDAR_ID
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–π, –≤ –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
ID –∫–∞–ª–µ–Ω–¥–∞—Ä—è –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ Google Calendar

### LOADING_STICKER_ID
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ ID —Å—Ç–∏–∫–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
ID —Å—Ç–∏–∫–µ—Ä–∞ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å—Ç–∏–∫–µ—Ä–∞ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º
–∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏–≤ –µ–≥–æ –≤ @LeadConverterToolkitBot

### ENVIRONMENT
–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ "local" –∏–ª–∏ "server"

#### Local development "ENVIRONMENT=local"
1. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.
2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Ñ–∞–π–ª token.pickle.
3. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–∫–µ–Ω –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

#### Server mode "ENVIRONMENT=server"
1. –°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª token.pickle –ª–æ–∫–∞–ª—å–Ω–æ
   –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   (–æ–Ω–∞ –ø—Ä–æ–π–¥–µ—Ç —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä)

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª token.pickle –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
    –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
    ```bash
    scp token.pickle username@your_server_ip:/path/to/your/project/
    ```
#### Calendar Icons

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
–≤–æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- –ü—Ä–æ—à–µ–¥—à–∞—è –¥–∞—Ç–∞: ‚úñÔ∏è
- –°–µ–≥–æ–¥–Ω—è—à–Ω—è—è –¥–∞—Ç–∞: ‚≠ïÔ∏è
- –î–∞—Ç—ã —Å –ø—Ä–æ—à–µ–¥—à–∏–º–∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏: ‚úîÔ∏è
- –í—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–Ω—è—Ç–æ: üî¥
- –ë—Ä–æ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ‚≠êÔ∏è

#### –†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä—É—Å—Å–∫—É—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –≤ —Å–∏—Å—Ç–µ–º–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ubuntu)
```bash
sudo apt-get update && sudo apt-get install language-pack-ru && sudo locale-gen ru_RU.UTF-8
```


## –ó–∞–ø—É—Å–∫ üöÄ

```bash
pip install -r requirements.txt
```

```bash
python my_telebot.py
```
–∏–ª–∏

(—á—Ç–æ–±—ã –±–æ—Ç —Ä–∞–±–æ—Ç–∞–ª –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ)
```bash
python my_telebot.py &
```
(–¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–Ω—É—Ç—Ä–∏ screen)
```bash
screen -dmS booking_telebot python my_telebot.py
```

#### –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞–∫ –∫–∞–∫ —Å–µ—Ä–≤–∏—Å:
1. —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `booking_telebot.service`
–≤–∞–∂–Ω–æ, —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/etc/systemd/system/`

2. –¥–æ–±–∞–≤–∏–º –≤ –Ω–µ–≥–æ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç:
```bash
[Unit]
Description=Booking Telegram Bot
After=multi-user.target

[Service]
Type=simple
User=root
Group=root
WorkingDirectory=/path/to/your/project
ExecStart=/usr/bin/python3 /path/to/your/project/my_telebot.py
Restart=always

[Install]
WantedBy=multi-user.target
```

3. –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º —Å–µ—Ä–≤–∏—Å
```bash
sudo systemctl daemon-reload && sudo systemctl enable booking_telebot.service && sudo systemctl start booking_telebot.service
```

4. –ø—Ä–æ–≤–µ—Ä–∏–º —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞
```bash
sudo systemctl status booking_telebot.service
```

5. –ø—Ä–æ–≤–µ—Ä–∏–º –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞
```bash
sudo journalctl -u booking_telebot.service -f
```
---
—Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
```bash
sudo systemctl stop booking_telebot.service
```

–∏ —É–¥–∞–ª–∏—Ç—å —Å–µ—Ä–≤–∏—Å
```bash
sudo systemctl disable booking_telebot.service && sudo systemctl remove booking_telebot.service
```
